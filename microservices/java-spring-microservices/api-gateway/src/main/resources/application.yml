server:
  port: 4004

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      globalcors:
        cors-configurations:
          '[/**]':
            allowedOriginPatterns: "*"
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - PATCH
              - OPTIONS
            allowedHeaders: "*"
            allowCredentials: true
            maxAge: 3600
      httpclient:
        connect-timeout: 10000
        response-timeout: 30s

gateway:
  jwt:
    enabled: true
    skip-paths:
      - /auth/login
      - /auth/register
      - /auth/verify-otp
      - /auth/request-login-otp
      - /auth/get-otp
      - /auth/resend-otp
      - /.well-known
      - /actuator/health
    jwks-uri: http://127.0.0.1:4005/.well-known/jwks.json
  
  # Service URLs for localhost development
  services:
    auth-service: http://127.0.0.1:4005
    farmer-service: http://127.0.0.1:4000
    funding-service: http://127.0.0.1:4001
    inventory-service: http://127.0.0.1:4002
    procurement-service: http://127.0.0.1:4003
    payment-service: http://127.0.0.1:4006
    profile-service: http://127.0.0.1:4007
    file-service: http://127.0.0.1:4008
    notification-service: http://127.0.0.1:4009
    chat-service: http://127.0.0.1:4010
    advisory-service: http://127.0.0.1:4011
    support-service: http://127.0.0.1:4012
    subscription-service: http://127.0.0.1:4013
    kyc-service: http://127.0.0.1:4014
    field-officer-service: http://127.0.0.1:4015

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always

logging:
  level:
    root: INFO
    com.krushikranti.gateway: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

